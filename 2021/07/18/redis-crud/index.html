<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Redis CRUD命令"><meta name="keywords" content=""><meta name="author" content="yunnight"><meta name="copyright" content="yunnight"><title>Redis CRUD命令 | yunnight</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.2.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#数据类型"><span class="toc-number">1.</span> <span class="toc-text">数据类型</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CRUD命令"><span class="toc-number">2.</span> <span class="toc-text">CRUD命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#String"><span class="toc-number">2.1.</span> <span class="toc-text">String</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hash"><span class="toc-number">2.2.</span> <span class="toc-text">Hash</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#List"><span class="toc-number">2.3.</span> <span class="toc-text">List</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Set"><span class="toc-number">2.4.</span> <span class="toc-text">Set</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ZSet"><span class="toc-number">2.5.</span> <span class="toc-text">ZSet</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#操作Key的命令"><span class="toc-number">3.</span> <span class="toc-text">操作Key的命令</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://raw.githubusercontent.com/yunnight/pics/master/blog_avatar.jpg"></div><div class="author-info__name text-center">yunnight</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">26</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">9</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">8</span></a></div></div></div><div id="content-outer"><div class="plain" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">yunnight</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a></span></div></div><div class="layout" id="content-inner"><article id="post"><div class="plain" id="post-title">Redis CRUD命令</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-07-18</time><span class="post-meta__separator">|</span><i class="fa fa-inbox" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/redis/"> redis</a></div><div class="article-container" id="post-content"><h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><p>Redis是一个key-value存储系统，存储的数据都是key-value格式的，key固定是String类型，value类型可以是：</p>
<ol>
<li>String</li>
<li>Hash：和HashMap一样，由key-value组成</li>
<li>List：列表，有序的，按插入顺序排序，可以指定从头部插入还是尾部插入，可以含重复值</li>
<li>Set：集合，无序的，不含重复值（插入重复值不会成功也不会报错）</li>
<li>ZSet：有序集合，比Set多一个排序用的score字段，有序的，不含重复值，score值可以重复</li>
</ol>
<h1 id="CRUD命令"><a href="#CRUD命令" class="headerlink" title="CRUD命令"></a>CRUD命令</h1><h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> cys ccc -- 增</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get cys -- 查</span><br><span class="line"><span class="string">"ccc"</span></span><br><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> cys yyy -- 改</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get cys -- 修改结果</span><br><span class="line"><span class="string">"yyy"</span></span><br><span class="line">127.0.0.1:6379&gt; del cys -- 删</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br></pre></td></tr></table></figure>

<p>要查看新增、删除结果，可以用如下方法查看：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> cys ccc -- 增</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; keys * -- 查看所有key，可以看到新增的key</span><br><span class="line">1) <span class="string">"cys"</span></span><br><span class="line">127.0.0.1:6379&gt; del cys -- 删</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; keys * -- 已不存在删除的key</span><br><span class="line">(empty list or <span class="built_in">set</span>)</span><br></pre></td></tr></table></figure>
<p>注意：<code>del</code>命令就是删掉整个key-value，无论value是什么格式。所以下面的Hash、List等整个删除也是用<code>del</code>。</p>
<h2 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hmset cyshash name cys age 22 -- 增，新增Map并添加元素</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; hgetall cyshash -- 查整个Map</span><br><span class="line">1) <span class="string">"name"</span></span><br><span class="line">2) <span class="string">"cys"</span></span><br><span class="line">3) <span class="string">"age"</span></span><br><span class="line">4) <span class="string">"22"</span></span><br><span class="line">127.0.0.1:6379&gt; hget cyshash name -- 查单个元素</span><br><span class="line"><span class="string">"cys"</span></span><br><span class="line">127.0.0.1:6379&gt; hmget cyshash name age -- 同时查多个元素</span><br><span class="line">1) <span class="string">"cys"</span></span><br><span class="line">2) <span class="string">"22"</span></span><br><span class="line">127.0.0.1:6379&gt; hset cyshash age 23 -- 改单个元素</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379&gt; hmset cyshash city shenzhen -- 改，给Map添加元素</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; hdel cyshash age -- 删单个元素</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; del cyshash -- 删整个Map</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br></pre></td></tr></table></figure>


<h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; lpush cyslist a -- 增，新增List并添加一个元素</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; llen cyslist -- 查List长度</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; lrange cyslist 0 2 -- 查，限定List下标范围查包含元素</span><br><span class="line">1) <span class="string">"a"</span></span><br><span class="line">127.0.0.1:6379&gt; lpush cyslist b c d f -- 改，给List添加元素</span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br><span class="line">127.0.0.1:6379&gt; lset cyslist 0 e -- 改，改某个下标的值</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; lrange cyslist 0 10 -- 可以看到0位<span class="string">"f"</span>改成了<span class="string">"e"</span></span><br><span class="line">1) <span class="string">"e"</span></span><br><span class="line">2) <span class="string">"d"</span></span><br><span class="line">3) <span class="string">"c"</span></span><br><span class="line">4) <span class="string">"b"</span></span><br><span class="line">5) <span class="string">"a"</span></span><br><span class="line">127.0.0.1:6379&gt; lpop cyslist -- 删一个元素，返回被删的元素值</span><br><span class="line"><span class="string">"e"</span></span><br><span class="line">127.0.0.1:6379&gt; del cyslist -- 删整个List</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：List的添加、删除元素可以在头尾两端添加，上面的<code>lpush</code>是在头部添加，<code>lpop</code>是在头部删除。</p>
<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; sadd cysset abc 123 -- 增，新增Set并添加元素</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">127.0.0.1:6379&gt; smembers cysset -- 查所有元素</span><br><span class="line">1) <span class="string">"123"</span></span><br><span class="line">2) <span class="string">"abc"</span></span><br><span class="line">127.0.0.1:6379&gt; sadd cysset dfh 098 -09 -- 改，给Set添加元素</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; smembers cysset -- 可以看到元素无序</span><br><span class="line">1) <span class="string">"dfh"</span></span><br><span class="line">2) <span class="string">"098"</span></span><br><span class="line">3) <span class="string">"123"</span></span><br><span class="line">4) <span class="string">"abc"</span></span><br><span class="line">5) <span class="string">"-09"</span></span><br><span class="line">127.0.0.1:6379&gt; spop cysset -- 删除尾部一个元素</span><br><span class="line"><span class="string">"-09"</span></span><br><span class="line">127.0.0.1:6379&gt; srem cysset 098 -- 删除指定元素</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; del cysset -- 删整个Set</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br></pre></td></tr></table></figure>
<p>注意：Set因为无序，所以不能指定下标或下标范围查找元素，也不能指定下标修改元素。另外，Set还有求多个Set之间交集、差集、并集的命令。</p>
<h2 id="ZSet"><a href="#ZSet" class="headerlink" title="ZSet"></a>ZSet</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; zadd cyszet 1 a 2 b 3 c -- 增，新增ZSet并添加元素</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">127.0.0.1:6379&gt; zrange cyszet 0 10 -- 查，下标在0~10的元素</span><br><span class="line">1) <span class="string">"a"</span></span><br><span class="line">2) <span class="string">"b"</span></span><br><span class="line">3) <span class="string">"c"</span></span><br><span class="line">127.0.0.1:6379&gt; zrange cyszet 0 10 WITHSCORES -- 查，下标在0~10的元素，结果带分数</span><br><span class="line">1) <span class="string">"a"</span></span><br><span class="line">2) <span class="string">"1"</span></span><br><span class="line">3) <span class="string">"b"</span></span><br><span class="line">4) <span class="string">"2"</span></span><br><span class="line">5) <span class="string">"c"</span></span><br><span class="line">6) <span class="string">"3"</span></span><br><span class="line">127.0.0.1:6379&gt; zrangebyscore cyszet 2 3 -- 查，分数在2~3的元素，这个方法也可以带 WITHSCORES</span><br><span class="line">1) <span class="string">"b"</span></span><br><span class="line">2) <span class="string">"c"</span></span><br><span class="line">127.0.0.1:6379&gt; zscore cyszet c -- 查，某个元素的分数</span><br><span class="line"><span class="string">"3"</span></span><br><span class="line">127.0.0.1:6379&gt; zadd cyszet 4 d 5 f -- 改，给ZSet添加元素</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">127.0.0.1:6379&gt; zrem cyszet a -- 删，指定元素</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; zrange cyszet 0 10 -- 删指定元素的结果</span><br><span class="line">1) <span class="string">"b"</span></span><br><span class="line">2) <span class="string">"c"</span></span><br><span class="line">3) <span class="string">"d"</span></span><br><span class="line">4) <span class="string">"f"</span></span><br><span class="line">127.0.0.1:6379&gt; zremrangebyrank cyszet 0 1 -- 删，按下标范围删除元素</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">127.0.0.1:6379&gt; zrange cyszet 0 10 -- 按下标范围删除元素的结果</span><br><span class="line">1) <span class="string">"d"</span></span><br><span class="line">2) <span class="string">"f"</span></span><br><span class="line">127.0.0.1:6379&gt; del cyszet -- 删整个ZSet</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br></pre></td></tr></table></figure>
<p>注意：ZSet有根据下标区间、分数区间、字典区间查找、删除元素的方法，还有求多个ZSet之间交集、并集的命令。</p>
<h1 id="操作Key的命令"><a href="#操作Key的命令" class="headerlink" title="操作Key的命令"></a>操作Key的命令</h1><p>``` bash<br>127.0.0.1:6379&gt; keys * – 查看所有key</p>
<p>1) “cysset”<br>127.0.0.1:6379&gt; type cysset – 查看key对应value类型<br>set<br>127.0.0.1:6379&gt; expire cysset 2 – 设置key在2秒后过期<br>(integer) 1<br>127.0.0.1:6379&gt; keys * – 2秒后key不存在了<br>(empty list or set)<br>···<br>其余还有很多没列出来。</p>
</div></article><div class="post-meta__tag-list"></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2021/07/18/redis-distributed-lock/"><i class="fa fa-chevron-left">  </i><span>Redis分布式锁</span></a></div><div class="next-post pull-right"><a href="/2021/07/18/java-thread-pool/"><span>Java线程池种类</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2021 By yunnight</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>